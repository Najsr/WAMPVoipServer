{
    "version": 2,
    "workers": [
        {
            "type": "router",
            "realms": [
                {
                    "name": "realm1",
                    "roles": [
                        {
                            "name": "anonymous",
							"authorizer": "com.authorizon.auth"
                        },
						{
							"name": "authorizon",
							"permissions": [
								{
									"uri": "com.authorizon.auth",
									"match": "exact",
									"allow": {
										"register": true
									}
								}
							]
						}
                    ]
                }
            ],
            "transports": [
                {
                    "type": "web",
                    "endpoint": {
                        "type": "tcp",
                        "port": 8080
                    },
                    "paths": {
                        "/": {
                            "type": "static",
                            "directory": "../web"
                        },
                        "ws": {
                            "type": "websocket",
							"auth": {
								"anonymous": {
									"type": "static",
									"role": "anonymous"
								},
								"ticket": {
									"type": "static",
									"principals": {
										"authorizon": {
											"ticket": "testpass",
											"role": "authorizon"
										}
									}
								}
							}
                        }
                    }
                }
            ]
        },
        {
            "type": "container",
            "options": {
                "pythonpath": [
                    ".."
                ]
            },
			"components": [
				{
					"type": "class",
					"classname": "authorizer.Authorizon",
					"realm": "realm1",
					"transport": {
						"type": "websocket",
						"endpoint": {
							"type": "tcp",
							"host": "127.0.0.1",
							"port": 8080
						},
						"url": "ws://127.0.0.1:8080/ws"
					}
				}
			]
           
        }
    ]
}
